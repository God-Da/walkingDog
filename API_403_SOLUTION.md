# 🚨 403 Forbidden 오류 해결 가이드

## 현재 상황
- API 키: `17c565db1c8d5ce49ddd51d20f04593f0333667d36b75e64d1f9f2e421327312`
- 오류: **403 Forbidden** (인코딩된 키, 인코딩하지 않은 키 모두 실패)

## ⚠️ 가장 가능성 높은 원인: API 신청 미완료

403 Forbidden이 두 방법 모두에서 발생한다면, **API 신청이 완료되지 않았거나 승인 대기 중**일 가능성이 매우 높습니다.

## 🔍 확인 방법

### 1. 공공데이터포탈에서 API 신청 상태 확인

1. [공공데이터포탈](https://www.data.go.kr/) 로그인
2. **마이페이지** 이동
3. **활용신청** 또는 **API 신청현황** 메뉴 클릭
4. 다음 API들의 상태 확인:
   - **에어코리아 대기오염정보 조회 서비스**
   - **기상청 단기예보 조회 서비스**

**상태 확인:**
- ✅ **승인완료**: 사용 가능 (이 상태여야 함)
- ⏳ **승인대기**: 아직 사용 불가 (승인 대기 중)
- ❌ **반려**: 재신청 필요

### 2. API 키 확인

1. **마이페이지** > **개발계정**
2. **일반 인증키(Encoding)** 확인
3. 현재 사용 중인 키와 동일한지 확인

### 3. 추가 테스트

백엔드 실행 후 다음 URL로 테스트:

```
http://localhost:8080/api/test/station-list
```

이 엔드포인트는 측정소 목록 API를 테스트합니다.

### 4. 직접 브라우저 테스트

브라우저에서 직접 테스트해보세요:

```
http://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?serviceKey=17c565db1c8d5ce49ddd51d20f04593f0333667d36b75e64d1f9f2e421327312&returnType=json&numOfRows=1&pageNo=1&stationName=강남구&dataTerm=DAILY&ver=1.0
```

**예상 결과:**
- 정상: JSON 데이터 반환
- 403: "Forbidden" 또는 오류 메시지

## 💡 해결 방법

### 방법 1: API 신청 완료 대기
- API 신청이 **승인대기** 상태라면 승인될 때까지 대기
- 보통 1-2일 소요

### 방법 2: API 재신청
- API 신청이 **반려**되었다면 재신청
- 신청 사유를 명확히 작성

### 방법 3: 다른 API 키 사용
- 다른 계정의 API 키 사용 (가능한 경우)
- 또는 새로운 계정으로 API 신청

## 🔧 임시 해결책

현재 코드는 API 호출 실패 시 기본값을 반환하도록 구현되어 있습니다:
- PM10: 0
- PM2.5: 0
- 기온: 20°C
- 하늘 상태: 맑음

이 상태로도 서비스는 동작하지만, **실제 데이터는 표시되지 않습니다**.

## 📞 추가 도움

문제가 계속되면:
1. 공공데이터포탈 고객센터 문의: 1577-3074
2. API 문서 확인: [공공데이터포탈 API 가이드](https://www.data.go.kr/)
3. 에어코리아 API 문서: [에어코리아 API](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15073861)

## ✅ 체크리스트

- [ ] 공공데이터포탈 로그인 확인
- [ ] API 신청현황에서 상태 확인
- [ ] 에어코리아 API가 "승인완료" 상태인지 확인
- [ ] 기상청 API가 "승인완료" 상태인지 확인
- [ ] API 키가 올바른지 확인
- [ ] 브라우저에서 직접 API 테스트
- [ ] `/api/test/station-list` 엔드포인트 테스트

**가장 중요한 것은 API 신청 상태가 "승인완료"인지 확인하는 것입니다!**

